<!DOCTYPE html>
<html lang="no">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="description" content="Et sparkesykkelspill for Ung i trafikken" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Sparkesykkel Spill</title>
    <link rel="stylesheet" href="styles.css" />
    <!-- Favicon -->
    <link rel="icon" href="deathtrip.png" type="image/png">
</head>

<body>
    <div class="game-container">
        <div class="game-header" role="banner">
            <div class="top-bar">
                <div class="logos">
                    <img src="deathtrip.png" alt="Deathtrip Logo" class="logo deathtrip-logo">
                    <img src="Ung i trafikken.png" alt="Ung i trafikken Logo" class="logo uit-logo">
                </div>
                <div class="theme-toggle">
                    <label class="switch" for="darkModeToggle">
                        <input type="checkbox" id="darkModeToggle" aria-label="Toggle dark mode">
                        <span class="slider round"></span>
                    </label>
                    <span id="theme-label">Dark Mode</span>
                </div>
                <div class="button-container">
                    <div class="button-wrapper">
                        <button id="soundToggle" aria-label="Toggle sound" class="sound-toggle">üîä</button>
                        <span class="button-label">Lyd</span>
                    </div>
                    <div class="button-wrapper">
                        <button id="clearDataBtn" aria-label="Slett all lagret data" class="clear-data-btn">üóëÔ∏è</button>
                        <span class="button-label">Slett data</span>
                    </div>
                </div>
            </div>
            <p class="score-display">Poengsum: <span id="score">0</span></p>
            <p class="score-display">High Score: <span id="highScore">0</span></p>
        </div>

        <canvas id="gameCanvas" aria-label="Sparkesykkel Spill" role="img"></canvas>

        <!-- Touch controls for mobile devices -->
        <div class="touch-controls">
            <div class="touch-button touch-up" id="touchUp">‚Üë</div>
            <div class="touch-button touch-down" id="touchDown">‚Üì</div>
            <div class="touch-button touch-left" id="touchLeft">‚Üê</div>
            <div class="touch-button touch-right" id="touchRight">‚Üí</div>
        </div>

        <div class="active-powerups" role="status" aria-live="polite">
            <div class="powerup-info">
                <h3>Aktive Power-ups:</h3>
                <div id="powerupContainer"></div>
            </div>
        </div>

        <div class="game-controls">
            <button id="startBtn" aria-label="Start spill">Start Spill</button>
            <button id="restartBtn" style="display: none;" aria-label="Spill igjen">Spill Igjen</button>
            <button id="highscoreBtn" aria-label="Vis highscores">Vis Highscores</button>

            <div class="controls-help">
                <p>Kontroller: Piltaster, WASD eller ber√∏ring</p>
                <p>
                    Samle power-ups:
                    <span class="powerup-icon" aria-hidden="true">üõ°Ô∏è</span> <span>Skjold</span>,
                    <span class="powerup-icon" aria-hidden="true">‚ö°</span> <span>Fart</span>,
                    <span class="powerup-icon" aria-hidden="true">‚è±Ô∏è</span> <span>Slow Motion</span>
                </p>
            </div>
        </div>
    </div>

    <script src="game.js"></script>
    <script>
        // Dark mode functionality
        const darkModeToggle = document.getElementById('darkModeToggle');
        const themeLabel = document.getElementById('theme-label');
        
        // Check for saved user preference
        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark-mode');
            darkModeToggle.checked = true;
        }
        
        darkModeToggle.addEventListener('change', () => {
            if (darkModeToggle.checked) {
                document.body.classList.add('dark-mode');
                localStorage.setItem('darkMode', 'enabled');
                themeLabel.textContent = 'Light Mode';
            } else {
                document.body.classList.remove('dark-mode');
                localStorage.setItem('darkMode', 'disabled');
                themeLabel.textContent = 'Dark Mode';
            }
        });
    </script>
</body>

</html>